---
title: Forms
sidebar_position: 4
---

# Forms

The Strux Framework provides a **robust, object-oriented form system** for building forms and validating data.

:::info
Strux Forms abstract away HTML rendering, data binding, and validation logic into **reusable PHP classes**, keeping your controllers and views clean.
:::

---

## Overview

With Strux Forms, you can:

- Define form fields using **PHP 8 attributes**
- Apply validation rules declaratively
- Bind request or model data automatically
- Render fields, labels, and errors consistently
- Reuse the same form for **create** and **edit** flows

---

## Creating a Form

To create a form, extend the base `Form` class.

:::tip Recommended
Defining fields using **PHP attributes** keeps your form declarative and easy to maintain.
:::

### Example: `RegistrationForm`

```php
namespace App\Http\Form;

use Strux\Component\Form\Form;
use Strux\Component\Form\Attributes\StringField;
use Strux\Component\Form\Attributes\PasswordField;
use Strux\Component\Form\Attributes\SelectField;
use Strux\Component\Form\Attributes\ButtonField;

class RegistrationForm extends Form
{
    #[StringField(label: 'Full Name', rules: ['required', 'minLength:3'])]
    protected string $name;

    #[StringField(label: 'Email Address', rules: ['required', 'email'])]
    protected string $email;

    #[PasswordField(label: 'Password', rules: ['required', 'minLength:8'])]
    protected string $password;

    #[SelectField(
        label: 'Role',
        options: ['user' => 'User', 'admin' => 'Admin'],
        rules: ['required']
    )]
    protected string $role = 'user';

    #[ButtonField(label: 'Register', attributes: ['class' => 'btn btn-primary'])]
    protected string $submit;
}
````

---

## Defining Fields

Strux supports **two ways** to define form fields.

---

### 1️⃣ PHP Attributes (Recommended)

Attributes keep your form definition close to your domain logic.

| Attribute       | Description    | Example                          |
| --------------- | -------------- | -------------------------------- |
| `StringField`   | Text input     | `#[StringField(label: 'Name')]`  |
| `PasswordField` | Password input | `#[PasswordField]`               |
| `SelectField`   | Dropdown menu  | `#[SelectField(options: [...])]` |
| `ButtonField`   | Submit button  | `#[ButtonField(label: 'Save')]`  |

---

### 2️⃣ The `build()` Method

Use the `build()` method for **dynamic or conditional fields** that attributes cannot express.

```php
public function build(): void
{
    $this->add('bio', 'textarea', [
        'label' => 'Biography',
        'rules' => ['required'],
        'attributes' => ['rows' => 5]
    ]);
}
```

---

## Rendering Forms

Forms are rendered in your views using **field helpers** or **magic properties**.

---

### Using Field Helpers (`field()`)

Recommended when form properties are protected.

```php
<form method="POST">
    <div class="mb-3">
        <?= $form->field('name')->label(['class' => 'form-label']) ?>
        <?= $form->field('name')->input(['class' => 'form-control']) ?>
        <?= $form->field('name')->error('text-danger') ?>
    </div>

    <?= $form->field('submit')->input() ?>
</form>
```

---

### Using Magic Properties

Works when properties are protected (via `__get`) or public.

```php
<?= $form->email->label() ?>
<?= $form->email->input() ?>
<?= $form->email->error() ?>
```

---

## Handling Submissions

In your controller, instantiate the form with the current `Request`.
Data binding happens automatically.

```php
use App\Http\Form\RegistrationForm;
use Strux\Component\Http\Response;

public function register(Request $request): Response
{
    $form = new RegistrationForm($request);

    if ($request->getMethod() === 'POST' && $form->isValid()) {
        $data = $form->getData();

        // Persist user...
        return new Response(200, [], "User {$data['name']} created!");
    }

    return $this->view('auth/register', ['form' => $form]);
}
```

---

## Model Binding

Forms can be populated from a **model**, **entity**, or **array** — ideal for edit screens.

```php
public function edit(int $id): Response
{
    $user = User::find($id);

    // Automatically maps model properties to form fields
    $form = new RegistrationForm($user);

    return $this->view('auth/edit', ['form' => $form]);
}
```

---

## Summary

* Forms are defined as **PHP classes**
* Fields are declared using **attributes or build()**
* Validation is automatic and rule-based
* Data binding works with requests and models
* Rendering is flexible and reusable

Next, explore **Validation Rules** or **Model Binding** in more depth to unlock the full power of Strux Forms.