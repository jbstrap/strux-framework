---
title: Query Builder
sidebar_position: 3
---

# Query Builder

Strux ORM provides a fluent, expressive query builder for constructing SQL queries safely.

:::info
All queries use **prepared statements** and automatic parameter binding.
:::

---

## Getting a Query Builder

```php
$query = User::query();
````

---

## Basic Wheres

```php
$query->where('status', 'active');
$query->where('priority', '>', 5);
$query->whereIn('id', [1, 2, 3]);
```

---

## Grouped Conditions

```php
$query->where('department', 'Support')
      ->where(function ($q) {
          $q->where('status', 'Open')
            ->orWhere('priority', 'Critical');
      });
```

---

## Convenience Methods

```php
$query->whereAny(
    ['subject', 'description'],
    'LIKE',
    '%urgent%'
);
```

Case-sensitive LIKE:

```php
$query->whereLike('license_code', 'ABC-123', caseSensitive: true);
```

---

## Subqueries

```php
$query->where('priority', '>', function ($sub) {
    $sub->selectRaw('AVG(priority)')
        ->from('tickets');
});
```

---

## Raw Expressions

```php
$query->selectRaw('count(*) as count, status')
      ->groupBy('status')
      ->whereRaw('created_at > ?', ['2023-01-01']);
```

---

## Executing Queries

```php
$results = $query->get();
$first   = $query->first();
$exists  = $query->exists();
```

---

## Performance Tips

````