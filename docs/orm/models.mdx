---
title: Models
sidebar_position: 1
---

# ORM Models

Strux ORM models represent **database tables** using the **Active Record** pattern.

:::info
Models define **schema**, **behavior**, and **persistence logic** using native PHP 8 attributes — no config files required.
:::

---

## Model Basics

- One model = one table
- One property = one column
- Attributes define mapping metadata
- Models extend `Strux\Component\Model\Model`

Models are typically stored in:

```text
src/Domain/{Domain}/Entity
````

---

## Defining a Model

```php
use Strux\Component\Database\Attributes\Table;
use Strux\Component\Database\Attributes\Column;
use Strux\Component\Database\Attributes\Id;
use Strux\Component\Database\Types\Field;
use Strux\Component\Model\Model;

#[Table(name: 'users')]
class User extends Model
{
    #[Id, Column(type: Field::bigInteger)]
    public ?int $id = null;

    #[Column(type: Field::string, length: 150)]
    public string $email;
}
```

---

## Column Options

The `#[Column]` attribute supports:

* `name` – Override column name
* `type` – `Field` enum (`string`, `text`, `json`, `timestamp`, etc.)
* `length` – VARCHAR / CHAR length
* `nullable` – Allow NULL values
* `unique` – Unique index
* `currentTimestamp` – DEFAULT CURRENT_TIMESTAMP
* `onUpdateCurrentTimestamp` – Auto-update timestamp

---

## Model Behavior Attributes

| Attribute       | Purpose                             |
| --------------- | ----------------------------------- |
| `#[Timestamps]` | Manages `created_at` / `updated_at` |
| `#[SoftDelete]` | Enables soft deletes                |

---

## Creating & Persisting Models

```php
$user = new User();
$user->email = 'john@example.com';
$user->save();
```

Or using mass assignment:

```php
$user = User::create([
    'email' => 'john@example.com'
]);
```