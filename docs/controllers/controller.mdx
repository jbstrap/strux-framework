---
title: Controllers
sidebar_position: 2
---

## Introduction

Controllers handle incoming HTTP requests and return responses. They act as the glue between **routes**, **models**, and **views**.

:::info
Strux controllers leverage PHP 8 Attributes, dependency injection, and response helpers to stay concise and readable.
:::

---

## Key Features

- Attribute-based routing
- Automatic dependency injection
- Middleware support
- Response helpers (views, JSON, redirects)

---

## Controller Structure

Controllers are organized by application type:

- **Web Controllers**
  `App\Http\Controller\Web`

- **API Controllers**
  `App\Http\Controller\Api`

All controllers extend the base `Controller` class.

---

## Creating a Controller

```php
#[Route('/', methods: ['GET'])]
public function home(): Response
{
    return $this->view('home', ['title' => 'Welcome']);
}
````

---

## Attribute-Based Routing

### Route Parameters

:::tip Recommended Syntax
Use colon-based parameters (`:id`) instead of legacy `{id}`.
:::

```php
#[Route('/users/:id')]
public function show(int $id): Response {}
```

### Optional Parameters

```php
#[Route('/blog/:category/page/int:page|?')]
public function blog(string $category, ?int $page = 1): Response {}
```

---

## Middleware

```php
#[Middleware([AuthMiddleware::class])]
public function dashboard(): Response
{
    return $this->view('dashboard');
}
```

---

## Request Handling

```php
public function store(Request $request): Response
{
    $email = $request->input('email');
    return $this->redirect('/success');
}
```

---

## Response Types

### View

```php
return $this->view('profile/index', ['user' => $user]);
```

### JSON

```php
return $this->json(['status' => 'success']);
```

### Redirect

```php
return $this->redirect('/login');
```

---

## Complete Example

:::info StudentController
A full CRUD controller example using routes, requests, and responses.
:::

```php
#[Route('/students', methods: ['GET'])]
public function index()
{
    return $this->view('students/index');
}
```